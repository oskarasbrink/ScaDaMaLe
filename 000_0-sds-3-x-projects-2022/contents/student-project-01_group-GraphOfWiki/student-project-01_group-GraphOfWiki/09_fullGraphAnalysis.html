<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>09_fullGraphAnalysis - sds-3.x/ScaDaMaLe</title>


        <!-- Custom HTML head -->

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../../../favicon.svg">
        <link rel="shortcut icon" href="../../../favicon.png">
        <link rel="stylesheet" href="../../../css/variables.css">
        <link rel="stylesheet" href="../../../css/general.css">
        <link rel="stylesheet" href="../../../css/chrome.css">
        <link rel="stylesheet" href="../../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../../highlight.css">
        <link rel="stylesheet" href="../../../tomorrow-night.css">
        <link rel="stylesheet" href="../../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../../../scroll-mdbook-outputs.css">

        <!-- MathJax -->
        <script async type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../../../introduction.html">Introduction</a></li><li class="chapter-item expanded affix "><li class="part-title">Projects</li><li class="chapter-item expanded "><a href="../../../contents/student-project-01_group-GraphOfWiki/student-project-01_group-GraphOfWiki/00_Introduction.html"><strong aria-hidden="true">1.</strong> student-project-01_group-GraphOfWiki_00_Introduction</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../contents/student-project-01_group-GraphOfWiki/student-project-01_group-GraphOfWiki/01_DataLoading_redirectsTable.html"><strong aria-hidden="true">1.1.</strong> 01_DataLoading_redirectsTable</a></li><li class="chapter-item expanded "><a href="../../../contents/student-project-01_group-GraphOfWiki/student-project-01_group-GraphOfWiki/02_DataLoading_pagesTable.html"><strong aria-hidden="true">1.2.</strong> 02_DataLoading_pagesTable</a></li><li class="chapter-item expanded "><a href="../../../contents/student-project-01_group-GraphOfWiki/student-project-01_group-GraphOfWiki/03_DataLoading_pagelinksTable.html"><strong aria-hidden="true">1.3.</strong> 03_DataLoading_pagelinksTable</a></li><li class="chapter-item expanded "><a href="../../../contents/student-project-01_group-GraphOfWiki/student-project-01_group-GraphOfWiki/04_DataLoading_categorylinksTable.html"><strong aria-hidden="true">1.4.</strong> 04_DataLoading_categorylinksTable</a></li><li class="chapter-item expanded "><a href="../../../contents/student-project-01_group-GraphOfWiki/student-project-01_group-GraphOfWiki/05_DataLoading_categoryTable.html"><strong aria-hidden="true">1.5.</strong> 05_DataLoading_categoryTable</a></li><li class="chapter-item expanded "><a href="../../../contents/student-project-01_group-GraphOfWiki/student-project-01_group-GraphOfWiki/06_redirectRemoval.html"><strong aria-hidden="true">1.6.</strong> 06_redirectRemoval</a></li><li class="chapter-item expanded "><a href="../../../contents/student-project-01_group-GraphOfWiki/student-project-01_group-GraphOfWiki/07_createArticleGraph.html"><strong aria-hidden="true">1.7.</strong> 07_createArticleGraph</a></li><li class="chapter-item expanded "><a href="../../../contents/student-project-01_group-GraphOfWiki/student-project-01_group-GraphOfWiki/08_explorationArticleGraph.html"><strong aria-hidden="true">1.8.</strong> 08_explorationArticleGraph</a></li><li class="chapter-item expanded "><a href="../../../contents/student-project-01_group-GraphOfWiki/student-project-01_group-GraphOfWiki/09_fullGraphAnalysis.html" class="active"><strong aria-hidden="true">1.9.</strong> 09_fullGraphAnalysis</a></li><li class="chapter-item expanded "><a href="../../../contents/student-project-01_group-GraphOfWiki/student-project-01_group-GraphOfWiki/10_explorativeMotifs.html"><strong aria-hidden="true">1.10.</strong> 10_explorativeMotifs</a></li><li class="chapter-item expanded "><a href="../../../contents/student-project-01_group-GraphOfWiki/student-project-01_group-GraphOfWiki/11_conclusionDiscussionAndFutureWork.html"><strong aria-hidden="true">1.11.</strong> 11_conclusionDiscussionAndFutureWork</a></li><li class="chapter-item expanded "><a href="../../../contents/student-project-01_group-GraphOfWiki/student-project-01_group-GraphOfWiki/12_gameNotebookSetup.html"><strong aria-hidden="true">1.12.</strong> 12_gameNotebookSetup</a></li><li class="chapter-item expanded "><a href="../../../contents/student-project-01_group-GraphOfWiki/student-project-01_group-GraphOfWiki/13_gameNotebook.html"><strong aria-hidden="true">1.13.</strong> 13_gameNotebook</a></li><li class="spacer"></li></ol></li><li class="chapter-item expanded "><a href="../../../contents/student-project-02_group-DDLOfVision/student-project-02_group-DDLOfVision/00_vqa_introduction.html"><strong aria-hidden="true">2.</strong> student-project-02_group-DDLOfVision_00_vqa_introduction</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../contents/student-project-02_group-DDLOfVision/student-project-02_group-DDLOfVision/01_vqa_model_training.html"><strong aria-hidden="true">2.1.</strong> 01_vqa_model_training</a></li><li class="chapter-item expanded "><a href="../../../contents/student-project-02_group-DDLOfVision/student-project-02_group-DDLOfVision/02_vqa_model_inference.html"><strong aria-hidden="true">2.2.</strong> 02_vqa_model_inference</a></li><li class="spacer"></li></ol></li><li class="chapter-item expanded "><a href="../../../contents/student-project-03_group-WikiKG2/student-project-03_group-WikiKG2/00_ingest_data.html"><strong aria-hidden="true">3.</strong> student-project-03_group-WikiKG2_00_ingest_data</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../contents/student-project-03_group-WikiKG2/student-project-03_group-WikiKG2/01_fetch_descriptions.html"><strong aria-hidden="true">3.1.</strong> 01_fetch_descriptions</a></li><li class="chapter-item expanded "><a href="../../../contents/student-project-03_group-WikiKG2/student-project-03_group-WikiKG2/02_load_data.html"><strong aria-hidden="true">3.2.</strong> 02_load_data</a></li><li class="chapter-item expanded "><a href="../../../contents/student-project-03_group-WikiKG2/student-project-03_group-WikiKG2/03_data_exploration.html"><strong aria-hidden="true">3.3.</strong> 03_data_exploration</a></li><li class="chapter-item expanded "><a href="../../../contents/student-project-03_group-WikiKG2/student-project-03_group-WikiKG2/04_analysing_relation_types.html"><strong aria-hidden="true">3.4.</strong> 04_analysing_relation_types</a></li><li class="chapter-item expanded "><a href="../../../contents/student-project-03_group-WikiKG2/student-project-03_group-WikiKG2/05_motif_search.html"><strong aria-hidden="true">3.5.</strong> 05_motif_search</a></li><li class="chapter-item expanded "><a href="../../../contents/student-project-03_group-WikiKG2/student-project-03_group-WikiKG2/06_produce_pagerank_vectors.html"><strong aria-hidden="true">3.6.</strong> 06_produce_pagerank_vectors</a></li><li class="chapter-item expanded "><a href="../../../contents/student-project-03_group-WikiKG2/student-project-03_group-WikiKG2/07_pagerank_for_classification.html"><strong aria-hidden="true">3.7.</strong> 07_pagerank_for_classification</a></li><li class="spacer"></li></ol></li><li class="chapter-item expanded "><a href="../../../contents/student-project-04_group-FedMLMedicalApp/student-project-04_group-FedMLMedicalApp/00_Notebook_Presentation.html"><strong aria-hidden="true">4.</strong> student-project-04_group-FedMLMedicalApp_00_Notebook_Presentation</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../contents/student-project-04_group-FedMLMedicalApp/student-project-04_group-FedMLMedicalApp/01_BrainTumorSegmentation_Centralized_Training.html"><strong aria-hidden="true">4.1.</strong> 01_BrainTumorSegmentation_Centralized_Training</a></li><li class="chapter-item expanded "><a href="../../../contents/student-project-04_group-FedMLMedicalApp/student-project-04_group-FedMLMedicalApp/02_Federated_Learning_BrainTumorSegmentation.html"><strong aria-hidden="true">4.2.</strong> 02_Federated_Learning_BrainTumorSegmentation</a></li><li class="chapter-item expanded "><a href="../../../contents/student-project-04_group-FedMLMedicalApp/student-project-04_group-FedMLMedicalApp/data_upload_test.html"><strong aria-hidden="true">4.3.</strong> data_upload_test</a></li><li class="spacer"></li></ol></li><li class="chapter-item expanded "><a href="../../../contents/student-project-05_group-DistOpt/student-project-05_group-DistOpt/00_introduction.html"><strong aria-hidden="true">5.</strong> student-project-05_group-DistOpt_00_introduction</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../contents/student-project-05_group-DistOpt/student-project-05_group-DistOpt/01_Bayesian_optimization.html"><strong aria-hidden="true">5.1.</strong> 01_Bayesian_optimization</a></li><li class="chapter-item expanded "><a href="../../../contents/student-project-05_group-DistOpt/student-project-05_group-DistOpt/02_Gaussian_processes.html"><strong aria-hidden="true">5.2.</strong> 02_Gaussian_processes</a></li><li class="chapter-item expanded "><a href="../../../contents/student-project-05_group-DistOpt/student-project-05_group-DistOpt/03_acquisition_functions.html"><strong aria-hidden="true">5.3.</strong> 03_acquisition_functions</a></li><li class="chapter-item expanded "><a href="../../../contents/student-project-05_group-DistOpt/student-project-05_group-DistOpt/04_scalable_Bayesian_optimization.html"><strong aria-hidden="true">5.4.</strong> 04_scalable_Bayesian_optimization</a></li><li class="chapter-item expanded "><a href="../../../contents/student-project-05_group-DistOpt/student-project-05_group-DistOpt/05_implementation_documentation.html"><strong aria-hidden="true">5.5.</strong> 05_implementation_documentation</a></li><li class="chapter-item expanded "><a href="../../../contents/student-project-05_group-DistOpt/student-project-05_group-DistOpt/06_our_implementation.html"><strong aria-hidden="true">5.6.</strong> 06_our_implementation</a></li><li class="chapter-item expanded "><a href="../../../contents/student-project-05_group-DistOpt/student-project-05_group-DistOpt/07_additional_code.html"><strong aria-hidden="true">5.7.</strong> 07_additional_code</a></li><li class="spacer"></li></ol></li><li class="chapter-item expanded "><a href="../../../contents/student-project-07_group-ExpsZerOInit/student-project-07_group-ExpsZerOInit/00_introduction_resnet.html"><strong aria-hidden="true">6.</strong> student-project-07_group-ExpsZerOInit_00_introduction_resnet</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../contents/student-project-07_group-ExpsZerOInit/student-project-07_group-ExpsZerOInit/01_transformer.html"><strong aria-hidden="true">6.1.</strong> 01_transformer</a></li><li class="chapter-item expanded "><a href="../../../contents/student-project-07_group-ExpsZerOInit/student-project-07_group-ExpsZerOInit/02_ddpm.html"><strong aria-hidden="true">6.2.</strong> 02_ddpm</a></li><li class="spacer"></li></ol></li><li class="chapter-item expanded "><a href="../../../contents/student-project-08_group-WikiSearch/student-project-08_group-WikiSearch/00_Introduction.html"><strong aria-hidden="true">7.</strong> student-project-08_group-WikiSearch_00_Introduction</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../contents/student-project-08_group-WikiSearch/student-project-08_group-WikiSearch/01_InputParsing.html"><strong aria-hidden="true">7.1.</strong> 01_InputParsing</a></li><li class="chapter-item expanded "><a href="../../../contents/student-project-08_group-WikiSearch/student-project-08_group-WikiSearch/02_PageRank.html"><strong aria-hidden="true">7.2.</strong> 02_PageRank</a></li><li class="chapter-item expanded "><a href="../../../contents/student-project-08_group-WikiSearch/student-project-08_group-WikiSearch/03_QuerySearch.html"><strong aria-hidden="true">7.3.</strong> 03_QuerySearch</a></li><li class="spacer"></li></ol></li><li class="chapter-item expanded "><a href="../../../contents/student-project-09_group-DistEnsembles/student-project-09_group-DistEnsembles/00_Introduction.html"><strong aria-hidden="true">8.</strong> student-project-09_group-DistEnsembles_00_Introduction</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../contents/student-project-09_group-DistEnsembles/student-project-09_group-DistEnsembles/01_Human_Pose_Data.html"><strong aria-hidden="true">8.1.</strong> 01_Human_Pose_Data</a></li><li class="chapter-item expanded "><a href="../../../contents/student-project-09_group-DistEnsembles/student-project-09_group-DistEnsembles/02_Ensemble_Training.html"><strong aria-hidden="true">8.2.</strong> 02_Ensemble_Training</a></li><li class="chapter-item expanded "><a href="../../../contents/student-project-09_group-DistEnsembles/student-project-09_group-DistEnsembles/03_Ensemble_Evaluation.html"><strong aria-hidden="true">8.3.</strong> 03_Ensemble_Evaluation</a></li><li class="chapter-item expanded "><a href="../../../contents/student-project-09_group-DistEnsembles/student-project-09_group-DistEnsembles/099_extra_Ensemble.html"><strong aria-hidden="true">8.4.</strong> 099_extra_Ensemble</a></li><li class="spacer"></li></ol></li><li class="chapter-item expanded "><a href="../../../contents/student-project-10_group-RDI/student-project-10_group-RDI/00_introduction.html"><strong aria-hidden="true">9.</strong> student-project-10_group-RDI_00_introduction</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../contents/student-project-10_group-RDI/student-project-10_group-RDI/01_prepare_data.html"><strong aria-hidden="true">9.1.</strong> 01_prepare_data</a></li><li class="chapter-item expanded "><a href="../../../contents/student-project-10_group-RDI/student-project-10_group-RDI/02_baseline.html"><strong aria-hidden="true">9.2.</strong> 02_baseline</a></li><li class="chapter-item expanded "><a href="../../../contents/student-project-10_group-RDI/student-project-10_group-RDI/03_single_machine.html"><strong aria-hidden="true">9.3.</strong> 03_single_machine</a></li><li class="chapter-item expanded "><a href="../../../contents/student-project-10_group-RDI/student-project-10_group-RDI/04_distributed_learning.html"><strong aria-hidden="true">9.4.</strong> 04_distributed_learning</a></li><li class="spacer"></li></ol></li><li class="chapter-item expanded "><a href="../../../contents/student-project-11_group-CollaborativeFiltering/student-project-11_group-CollaborativeFiltering/01_Introduction.html"><strong aria-hidden="true">10.</strong> student-project-11_group-CollaborativeFiltering_01_Introduction</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../contents/student-project-11_group-CollaborativeFiltering/student-project-11_group-CollaborativeFiltering/02_AlgorithmsBeyondALS.html"><strong aria-hidden="true">10.1.</strong> 02_AlgorithmsBeyondALS</a></li><li class="chapter-item expanded "><a href="../../../contents/student-project-11_group-CollaborativeFiltering/student-project-11_group-CollaborativeFiltering/03_Implementation.html"><strong aria-hidden="true">10.2.</strong> 03_Implementation</a></li><li class="spacer"></li></ol></li><li class="chapter-item expanded "><a href="../../../contents/student-project-12_group-FedLearnOpt/student-project-12_group-FedLearnOpt/01_Federated_Learning_Introduction.html"><strong aria-hidden="true">11.</strong> student-project-12_group-FedLearnOpt_01_Federated_Learning_Introduction</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../contents/student-project-12_group-FedLearnOpt/student-project-12_group-FedLearnOpt/02_Horovod_Introduction.html"><strong aria-hidden="true">11.1.</strong> 02_Horovod_Introduction</a></li><li class="chapter-item expanded "><a href="../../../contents/student-project-12_group-FedLearnOpt/student-project-12_group-FedLearnOpt/03_Implementations.html"><strong aria-hidden="true">11.2.</strong> 03_Implementations</a></li><li class="spacer"></li></ol></li><li class="chapter-item expanded "><a href="../../../contents/student-project-13_group-DRL/student-project-13_group-DRL/00_DistributedRL.html"><strong aria-hidden="true">12.</strong> student-project-13_group-DRL_00_DistributedRL</a></li><li class="spacer"></li><li class="chapter-item expanded "><a href="../../../contents/student-project-14_group-EarthObs/student-project-14_group-EarthObs/00_Introduction.html"><strong aria-hidden="true">13.</strong> student-project-14_group-EarthObs_00_Introduction</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../contents/student-project-14_group-EarthObs/student-project-14_group-EarthObs/01_Download_data.html"><strong aria-hidden="true">13.1.</strong> 01_Download_data</a></li><li class="chapter-item expanded "><a href="../../../contents/student-project-14_group-EarthObs/student-project-14_group-EarthObs/02_Image_preprocessing.html"><strong aria-hidden="true">13.2.</strong> 02_Image_preprocessing</a></li><li class="chapter-item expanded "><a href="../../../contents/student-project-14_group-EarthObs/student-project-14_group-EarthObs/03_Model_Architecture_and_Training.html"><strong aria-hidden="true">13.3.</strong> 03_Model_Architecture_and_Training</a></li><li class="chapter-item expanded "><a href="../../../contents/student-project-14_group-EarthObs/student-project-14_group-EarthObs/04_Prediction_And_Visualisation.html"><strong aria-hidden="true">13.4.</strong> 04_Prediction_And_Visualisation</a></li><li class="chapter-item expanded "><a href="../../../contents/student-project-14_group-EarthObs/student-project-14_group-EarthObs/05_Conclusions.html"><strong aria-hidden="true">13.5.</strong> 05_Conclusions</a></li><li class="spacer"></li></ol></li><li class="chapter-item expanded "><a href="../../../contents/student-projects-BrIntSuSvConclusion/student-projects-BrIntSuSvConclusion/BrIntSuSv.html"><strong aria-hidden="true">14.</strong> student-projects-BrIntSuSvConclusion_BrIntSuSv</a></li><li class="spacer"></li><li class="chapter-item expanded "><a href="../../../editors.html"><strong aria-hidden="true">15.</strong> Editors</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">sds-3.x/ScaDaMaLe</h1>

                    <div class="right-buttons">
                        <a href="../../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <div class="cell markdown">
<h1 id="full-graph-analysis"><a class="header" href="#full-graph-analysis">Full Graph Analysis</a></h1>
<p>In this notebook we will analyze the Graph created and explored in the notebook <code>08_explorationArticleGraph</code>, with the slight change that in this analysis we only consider the 25% of articles with the longest pages. We do this to reduce the size of the graph, since we found that the run times got unreasonably long when using the full graph.</p>
<p>The following areas will be analyzed in this notebook: 1. Graph size and density for the reduced graph 2. Existence of leaf/source nodes in the graph 3. Connected Components 4. Shortest Paths (Maybe a game here...) 5. BFS 6. Unidirected vs bidirected edges</p>
</div>
<div class="cell code" execution_count="1" scrolled="false">
<pre><code class="language-scala">import org.graphframes.GraphFrame
import org.apache.spark.sql.functions._
</code></pre>
<div class="output execute_result plain_result" execution_count="1">
<pre><code>import org.graphframes.GraphFrame
import org.apache.spark.sql.functions._
</code></pre>
</div>
</div>
<div class="cell markdown">
<p>Starting by re-creating the Wiki GraphFrame.</p>
</div>
<div class="cell code" execution_count="1" scrolled="false">
<pre><code class="language-scala">val dfPages = spark.sql(&quot;SELECT * FROM enwiki_page&quot;) // Read pages data
val dfCategory = spark.sql(&quot;SELECT * FROM enwiki_category&quot;) // Read categories
val dfCategoryLinks = spark.sql(&quot;SELECT * FROM enwiki_categorylinks&quot;) // Read links between articles/categories and categories
</code></pre>
<div class="output execute_result plain_result" execution_count="1">
<pre><code>dfPages: org.apache.spark.sql.DataFrame = [page_id: int, page_title: string ... 5 more fields]
dfCategory: org.apache.spark.sql.DataFrame = [cat_id: int, cat_title: string ... 3 more fields]
dfCategoryLinks: org.apache.spark.sql.DataFrame = [cl_from: int, cl_to: string ... 1 more field]
</code></pre>
</div>
</div>
<div class="cell code" execution_count="1" scrolled="false">
<pre><code class="language-scala">// Join pages with category information
val dfArticlesCat = dfPages.filter(col(&quot;page_is_redirect&quot;)===0) // remove all redirects
                           .join(dfCategoryLinks.filter(col(&quot;cl_type&quot;)===&quot;page&quot;), col(&quot;page_id&quot;)===col(&quot;cl_from&quot;), &quot;left&quot;)
</code></pre>
<div class="output execute_result plain_result" execution_count="1">
<pre><code>dfArticlesCat: org.apache.spark.sql.DataFrame = [page_id: int, page_title: string ... 8 more fields]
</code></pre>
</div>
</div>
<div class="cell code" execution_count="1" scrolled="false">
<pre><code class="language-scala">// Group on article and aggregate the categories as a set per article
val dfArticlesCatGrouped = dfArticlesCat.groupBy(&quot;page_id&quot;,&quot;page_title&quot;,&quot;page_len&quot;).agg(collect_set(col(&quot;cl_to&quot;)))
</code></pre>
<div class="output execute_result plain_result" execution_count="1">
<pre><code>dfArticlesCatGrouped: org.apache.spark.sql.DataFrame = [page_id: int, page_title: string ... 2 more fields]
</code></pre>
</div>
</div>
<div class="cell code" execution_count="1" scrolled="false">
<pre><code class="language-scala">val dfVertex = dfArticlesCatGrouped.withColumnRenamed(&quot;page_id&quot;, &quot;id&quot;).withColumnRenamed(&quot;collect_set(cl_to)&quot;, &quot;categories&quot;).select(&quot;id&quot;, &quot;page_title&quot;,&quot;page_len&quot;)
</code></pre>
<div class="output execute_result plain_result" execution_count="1">
<pre><code>dfVertex: org.apache.spark.sql.DataFrame = [id: int, page_title: string ... 1 more field]
</code></pre>
</div>
</div>
<div class="cell code" execution_count="1" scrolled="false">
<pre><code class="language-scala">val dfEdgeLinks = spark.sql(&quot;SELECT * FROM enwiki_graph_edges_shortenedredirects&quot;) // Download the edges w.o. redirects
</code></pre>
<div class="output execute_result plain_result" execution_count="1">
<pre><code>dfEdgeLinks: org.apache.spark.sql.DataFrame = [src: int, src_title: string ... 3 more fields]
</code></pre>
</div>
</div>
<div class="cell code" execution_count="1" scrolled="false">
<pre><code class="language-scala">// Since graphframes does not remove edges between non existing edges automatically, we do this manually thru joins
// This is done in 2 steps where we 1st remove edges where the source does not exist
// Secondly we remove edges where the destination does not exist
val filteredEdges = dfEdgeLinks.join(dfVertex,
                                     col(&quot;src&quot;)===dfVertex.col(&quot;id&quot;), &quot;inner&quot;)
                               .select(&quot;src&quot;, &quot;dst&quot;)
                               .join(dfVertex,
                                     col(&quot;dst&quot;)===dfVertex.col(&quot;id&quot;), &quot;inner&quot;).select(&quot;src&quot;,&quot;dst&quot;)
</code></pre>
<div class="output execute_result plain_result" execution_count="1">
<pre><code>filteredEdges: org.apache.spark.sql.DataFrame = [src: int, dst: int]
</code></pre>
</div>
</div>
<div class="cell code" execution_count="1" scrolled="false">
<pre><code class="language-scala">val dfEdges = filteredEdges
</code></pre>
<div class="output execute_result plain_result" execution_count="1">
<pre><code>dfEdges: org.apache.spark.sql.DataFrame = [src: int, dst: int]
</code></pre>
</div>
</div>
<div class="cell code" execution_count="1" scrolled="false">
<pre><code class="language-scala">// Create the full graph from the non-redirect articles and the the filtered edges
val gFull = GraphFrame(dfVertex, dfEdges)
</code></pre>
<div class="output execute_result plain_result" execution_count="1">
<pre><code>gFull: org.graphframes.GraphFrame = GraphFrame(v:[id: int, page_title: string ... 1 more field], e:[src: int, dst: int])
</code></pre>
</div>
</div>
<div class="cell markdown">
<p>Let us reduce the graph size based on longer articles. Recall that we thought it would be a good idea to use some quantile value as a cut-off for the page length.</p>
</div>
<div class="cell code" execution_count="1" scrolled="false">
<pre><code class="language-scala">// Use the approxQuantile method to quiclky get an estimate of the quantiles
dfVertex.stat.approxQuantile(&quot;page_len&quot;, Array(0.5, 0.75, 0.95), 0.005)
</code></pre>
<div class="output execute_result plain_result" execution_count="1">
<pre><code>res7: Array[Double] = Array(4082.0, 8417.0, 28170.0)
</code></pre>
</div>
</div>
<div class="cell markdown">
<p>Lets use the 0.75 quantile, then we only consider the top 25% longest articles.</p>
</div>
<div class="cell code" execution_count="1" scrolled="false">
<pre><code class="language-scala">// Create a reduced graph where we only condsider longer articles
val gRed = gFull.filterVertices(col(&quot;page_len&quot;)&gt;=8417L).dropIsolatedVertices()
</code></pre>
<div class="output execute_result plain_result" execution_count="1">
<pre><code>gRed: org.graphframes.GraphFrame = GraphFrame(v:[id: int, page_title: string ... 1 more field], e:[src: int, dst: int])
</code></pre>
</div>
</div>
<div class="cell markdown">
<p>Some examples of articles below. Here <code>Astronomer</code> has a page length of 8573, which is fairly close to the cut-off, lets look at that article.</p>
</div>
<div class="cell code" execution_count="1" scrolled="false">
<pre><code class="language-scala">// Look at some examples
gRed.vertices.take(10)
</code></pre>
<div class="output execute_result plain_result" execution_count="1">
<pre><code>res8: Array[org.apache.spark.sql.Row] = Array([580,Astronomer,8573], [633,Algae,90619], [673,Atomic_number,14031], [737,Afghanistan,310005], [799,Aquarius_(constellation),36019], [808,Alfred_Hitchcock,179231], [857,Aberdeenshire,33434], [897,Arsenic,127483], [898,Antimony,60686], [974,Ada_Lovelace,81872])
</code></pre>
</div>
</div>
<div class="cell code" execution_count="1" scrolled="auto">
<div class="output execute_result html_result" execution_count="1">
<iframe 
 src="https://en.wikipedia.org/wiki/Astronomer"
 width="95%" height="500"
 sandbox>
  <p>
    <a href="http://spark.apache.org/docs/latest/index.html">
      Fallback link for browsers that, unlikely, don't support frames
    </a>
  </p>
</iframe>
</div>
</div>
<div class="cell markdown">
<p>As one can see, this is still a fairly short article, so we will consider this threshold as not beeing too restrictive.</p>
</div>
<div class="cell markdown">
<p>Let's look at the size of this reduced graph to see what happened as we removed the shorter articles.</p>
</div>
<div class="cell code" execution_count="1" scrolled="false">
<pre><code class="language-scala">// In reduced graph
val noNodes = gRed.vertices.count
val noEdges = gRed.edges.count
val density = noEdges / noNodes
</code></pre>
<div class="output execute_result plain_result" execution_count="1">
<pre><code>noNodes: Long = 1652126
noEdges: Long = 206275015
density: Long = 124
</code></pre>
</div>
</div>
<div class="cell code" execution_count="1" scrolled="false">
<pre><code class="language-scala">// Let's use reduced size
val g = gRed
</code></pre>
<div class="output execute_result plain_result" execution_count="1">
<pre><code>g: org.graphframes.GraphFrame = GraphFrame(v:[id: int, page_title: string ... 1 more field], e:[src: int, dst: int])
</code></pre>
</div>
</div>
<div class="cell code" execution_count="1" scrolled="false">
<pre><code class="language-scala">gFull.unpersist
dfVertex.unpersist
</code></pre>
<div class="output execute_result plain_result" execution_count="1">
<pre><code>res8: dfVertex.type = [id: int, page_title: string ... 1 more field]
</code></pre>
</div>
</div>
<div class="cell markdown">
<h2 id="terminal-nodes-and-root-nodes"><a class="header" href="#terminal-nodes-and-root-nodes">Terminal Nodes and Root Nodes</a></h2>
<p>Do we have any leaf nodes, i.e. nodes without any outgoing links, or root nodes without any incoming links?</p>
</div>
<div class="cell code" execution_count="1" scrolled="false">
<pre><code class="language-scala">// what is the min number of incoming and outgoing edges?
val minOut = g.outDegrees.select(min(&quot;outDegree&quot;))
val minIn = g.inDegrees.select(min(&quot;inDegree&quot;))
println(minOut.show())
println(minIn.show())
</code></pre>
<div class="output execute_result plain_result" execution_count="1">
<pre><code>+--------------+
|min(outDegree)|
+--------------+
|             1|
+--------------+

()
+-------------+
|min(inDegree)|
+-------------+
|            1|
+-------------+

()
minOut: org.apache.spark.sql.DataFrame = [min(outDegree): int]
minIn: org.apache.spark.sql.DataFrame = [min(inDegree): int]
</code></pre>
</div>
</div>
<div class="cell markdown">
<p>Ok so we neither have any source nodes nor leaf nodes since the minimum in/out degree is 1 and not 0.</p>
</div>
<div class="cell code" execution_count="1" scrolled="false">
<pre><code class="language-scala">val leafNodes = g.outDegrees.filter(col(&quot;outDegree&quot;)===1).select(&quot;id&quot;)
leafNodes.distinct.count()
</code></pre>
<div class="output execute_result plain_result" execution_count="1">
<pre><code>leafNodes: org.apache.spark.sql.DataFrame = [id: int]
res31: Long = 462
</code></pre>
</div>
</div>
<div class="cell code" execution_count="1" scrolled="false">
<pre><code class="language-scala">val rootNodes = g.inDegrees.filter(col(&quot;inDegree&quot;)===1).select(&quot;id&quot;)
rootNodes.distinct.count()
</code></pre>
<div class="output execute_result plain_result" execution_count="1">
<pre><code>rootNodes: org.apache.spark.sql.DataFrame = [id: int]
res33: Long = 49074
</code></pre>
</div>
</div>
<div class="cell markdown">
<p>How many nodes do we have in intersection?</p>
</div>
<div class="cell code" execution_count="1" scrolled="false">
<pre><code class="language-scala">rootNodes.join(leafNodes, rootNodes.col(&quot;id&quot;)===leafNodes.col(&quot;id&quot;)).count()
</code></pre>
<div class="output execute_result plain_result" execution_count="1">
<pre><code>res35: Long = 110
</code></pre>
</div>
</div>
<div class="cell code" execution_count="1" scrolled="false">
<pre><code class="language-scala">def pruneLeafNodes(graph: GraphFrame, depth: Int, maxDepth: Int) : GraphFrame = {
  println(&quot;Current Depth: %d&quot;.format(depth))
  var leafNodes = graph.outDegrees.filter(col(&quot;outDegree&quot;)===0).select(&quot;id&quot;)
  println(&quot;Current number of leaf nodes: %d&quot;.format(leafNodes.distinct.count()))
  var prunedG = graph.filterVertices(!col(&quot;id&quot;).isin(leafNodes))
  if (depth == maxDepth) {
    return prunedG
  }
  else {
    pruneLeafNodes(prunedG, depth + 1, maxDepth)
  }
} 
</code></pre>
<div class="output execute_result plain_result" execution_count="1">
<pre><code>pruneLeafNodes: (graph: org.graphframes.GraphFrame, depth: Int, maxDepth: Int)org.graphframes.GraphFrame
</code></pre>
</div>
</div>
<div class="cell code" execution_count="1" scrolled="false">
<pre><code class="language-scala">def pruneRootNodes(graph: GraphFrame, depth: Int, maxDepth: Int) : GraphFrame = {
  println(&quot;Current Depth: %d&quot;.format(depth))
  var leafNodes = graph.inDegrees.filter(col(&quot;inDegree&quot;)===0).select(&quot;id&quot;)
  println(&quot;Current number of root nodes: %d&quot;.format(leafNodes.distinct.count()))
  var prunedG = graph.filterVertices(!col(&quot;id&quot;).isin(leafNodes))
  if (depth == maxDepth) {
    return prunedG
  }
  else {
    pruneLeafNodes(prunedG, depth + 1, maxDepth)
  }
} 
</code></pre>
<div class="output execute_result plain_result" execution_count="1">
<pre><code>pruneRootNodes: (graph: org.graphframes.GraphFrame, depth: Int, maxDepth: Int)org.graphframes.GraphFrame
</code></pre>
</div>
</div>
<div class="cell markdown">
<h2 id="connected-components"><a class="header" href="#connected-components">Connected Components</a></h2>
<p>Now let us also try out some of the built-in algorithms of GraphFrames, starting with <em>Connected Components</em>. Connected components searches a graph for structures of nodes connected to each other through paths. If it finds that some nodes are not able to reach eachother through some path, the nodes are placed in different components. More about this can be read at the page linked below.</p>
</div>
<div class="cell code" execution_count="1" scrolled="auto">
<div class="output execute_result html_result" execution_count="1">
<iframe 
 src="https://en.wikipedia.org/wiki/Component_(graph_theory)"
 width="95%" height="500"
 sandbox>
  <p>
    <a href="http://spark.apache.org/docs/latest/index.html">
      Fallback link for browsers that, unlikely, don't support frames
    </a>
  </p>
</iframe>
</div>
</div>
<div class="cell code" execution_count="1" scrolled="false">
<pre><code class="language-scala">// Please work for once...
val result = g.connectedComponents.setAlgorithm(&quot;graphx&quot;).run()
result.select(&quot;id&quot;, &quot;component&quot;).orderBy(&quot;component&quot;).show()
</code></pre>
<div class="output execute_result plain_result" execution_count="1">
<pre><code>+----+---------+
|  id|component|
+----+---------+
| 316|       12|
| 738|       12|
| 789|       12|
| 825|       12|
| 856|       12|
| 897|       12|
|1164|       12|
|1267|       12|
|1307|       12|
|1346|       12|
|1437|       12|
|1453|       12|
|1514|       12|
|1545|       12|
|1570|       12|
|1623|       12|
|1629|       12|
|1698|       12|
|1761|       12|
|1762|       12|
+----+---------+
only showing top 20 rows

result: org.apache.spark.sql.DataFrame = [id: int, page_title: string ... 2 more fields]
</code></pre>
</div>
</div>
<div class="cell code" execution_count="1" scrolled="false">
<pre><code class="language-scala">// How many connected components do we have?
result.select(&quot;component&quot;).distinct.count
</code></pre>
<div class="output execute_result plain_result" execution_count="1">
<pre><code>res39: Long = 2
</code></pre>
</div>
</div>
<div class="cell code" execution_count="1" scrolled="false">
<pre><code class="language-scala">// OK how many articles do we have in each component?
result.groupBy(&quot;component&quot;).count().show()
</code></pre>
<div class="output execute_result plain_result" execution_count="1">
<pre><code>+---------+-------+
|component|  count|
+---------+-------+
|       12|1652125|
| 11516425|      1|
+---------+-------+
</code></pre>
</div>
</div>
<div class="cell markdown">
<p>Ok, so all articles except 1 ends up in the same component. What article is that?</p>
</div>
<div class="cell code" execution_count="1" scrolled="false">
<pre><code class="language-scala">result.withColumnRenamed(&quot;id&quot;, &quot;idComp&quot;).join(gRed.vertices, col(&quot;idComp&quot;)===col(&quot;id&quot;)).filter(col(&quot;component&quot;)===11516425L).show()
</code></pre>
<div class="output execute_result plain_result" execution_count="1">
<pre><code>+--------+------------+--------+---------+--------+------------+--------+
|  idComp|  page_title|page_len|component|      id|  page_title|page_len|
+--------+------------+--------+---------+--------+------------+--------+
|11516425|Mohammadabad|   18652| 11516425|11516425|Mohammadabad|   18652|
+--------+------------+--------+---------+--------+------------+--------+
</code></pre>
</div>
</div>
<div class="cell code" execution_count="1" scrolled="auto">
<div class="output execute_result html_result" execution_count="1">
<iframe 
 src="https://en.wikipedia.org/wiki/Mohammadabad"
 width="95%" height="500"
 sandbox>
  <p>
    <a href="http://spark.apache.org/docs/latest/index.html">
      Fallback link for browsers that, unlikely, don't support frames
    </a>
  </p>
</iframe>
</div>
</div>
<div class="cell markdown">
<p>This page only links to short pages, which will not be included in the graph.</p>
</div>
<div class="cell markdown">
<p>One can also look at <em>Strongly Connected Components</em>, where directionality also matters when determining wether a set of nodes can reach another set. However this was not done in this project.</p>
</div>
<div class="cell markdown">
<h2 id="shortest-paths"><a class="header" href="#shortest-paths">Shortest Paths</a></h2>
<p>We performed some analysis on the shortest paths from all nodes to some landmark nodes. In this analysis we look at some quantile values of the distance from all nodes to one, to get a sense of the diameter of the graph. To get a more accurate measure of this diameter, one should probably sample a large sample of nodes, and the take an average over the maximum distance for all of the landmark nodes, however when testing this with only 10 landmark nodes we ran in to problems with the runtime. Further, we came up with a small game based on the shortest distances, which we perhaps will have time to play during the presentation.</p>
</div>
<div class="cell markdown">
<p>Lets just pick one arbitrary article on wikipedia, say Lord Voldemort.</p>
</div>
<div class="cell code" execution_count="1" scrolled="false">
<pre><code class="language-scala">g.vertices.filter(col(&quot;page_title&quot;).rlike(&quot;Voldemort&quot;)).show()
</code></pre>
<div class="output execute_result plain_result" execution_count="1">
<pre><code>+--------+--------------------+--------+
|      id|          page_title|page_len|
+--------+--------------------+--------+
|12294600|Voldemort_Can't_S...|   11987|
|   45106|      Lord_Voldemort|   69962|
|54184819|Voldemort:_Origin...|   12304|
+--------+--------------------+--------+
</code></pre>
</div>
</div>
<div class="cell code" execution_count="1" scrolled="auto">
<div class="output execute_result html_result" execution_count="1">
<iframe 
 src="https://en.wikipedia.org/wiki/Lord_Voldemort"
 width="95%" height="500"
 sandbox>
  <p>
    <a href="http://spark.apache.org/docs/latest/index.html">
      Fallback link for browsers that, unlikely, don't support frames
    </a>
  </p>
</iframe>
</div>
</div>
<div class="cell markdown">
<p>Running shortest paths on this landmark, we are able to retrieve the distances from every node to our landmark.</p>
</div>
<div class="cell code" execution_count="1" scrolled="false">
<pre><code class="language-scala">spark.catalog.clearCache() // clear the cache, seems like this helped when the cluster was under a lot of stress
val articleId = 45106L
val results = g.shortestPaths.landmarks(Seq(articleId)).run()
results.select(&quot;id&quot;, &quot;distances&quot;).sample(0.000001).show()
</code></pre>
<div class="output execute_result plain_result" execution_count="1">
<pre><code>+----+------------+
|  id|   distances|
+----+------------+
|9425|{45106 -&gt; 3}|
+----+------------+

articleId: Long = 45106
results: org.apache.spark.sql.DataFrame = [id: int, page_title: string ... 2 more fields]
</code></pre>
</div>
</div>
<div class="cell code" execution_count="1" scrolled="false">
<pre><code class="language-scala">// Look ath the schema
results.printSchema
</code></pre>
<div class="output execute_result plain_result" execution_count="1">
<pre><code>root
 |-- id: integer (nullable = true)
 |-- page_title: string (nullable = true)
 |-- page_len: integer (nullable = true)
 |-- distances: map (nullable = true)
 |    |-- key: long
 |    |-- value: integer (valueContainsNull = false)
</code></pre>
</div>
</div>
<div class="cell code" execution_count="1" scrolled="false">
<pre><code class="language-scala">// Write the results to a parquet file so we don't have to redo this all the time when the cluster dies
results.write.parquet(&quot;WikipediaData/shortestPathsLV.parquet&quot;)
</code></pre>
</div>
<div class="cell code" execution_count="1" scrolled="false">
<pre><code class="language-scala">val dfPaths = spark.read.parquet(&quot;/WikipediaData/shortestPathsLV.parquet&quot;)
</code></pre>
<div class="output execute_result plain_result" execution_count="1">
<pre><code>dfPaths: org.apache.spark.sql.DataFrame = [id: int, page_title: string ... 2 more fields]
</code></pre>
</div>
</div>
<div class="cell code" execution_count="1" scrolled="false">
<pre><code class="language-scala">// Check the schema and compare with above to make sure everything worked
dfPaths.printSchema
</code></pre>
<div class="output execute_result plain_result" execution_count="1">
<pre><code>root
 |-- id: integer (nullable = true)
 |-- page_title: string (nullable = true)
 |-- page_len: integer (nullable = true)
 |-- distances: map (nullable = true)
 |    |-- key: long
 |    |-- value: integer (valueContainsNull = true)
</code></pre>
</div>
</div>
<div class="cell code" execution_count="1" scrolled="false">
<pre><code class="language-scala">// Get the distances only
val dfD = dfPaths.select(&quot;distances&quot;).withColumn(&quot;dist&quot;, col(&quot;distances&quot;).getItem(articleId))
</code></pre>
<div class="output execute_result plain_result" execution_count="1">
<pre><code>dfD: org.apache.spark.sql.DataFrame = [distances: map&lt;bigint,int&gt;, dist: int]
</code></pre>
</div>
</div>
<div class="cell markdown">
<p>Now, what is the longest distance from this node to any node in the graph? This should give us an idea of how &quot;deep&quot; or &quot;shallow&quot; the graph is. If the longest distance is not that big, it means that our graph is really shallow.</p>
</div>
<div class="cell code" execution_count="1" scrolled="false">
<pre><code class="language-scala">dfD.select(max(&quot;dist&quot;)).show()
</code></pre>
<div class="output execute_result plain_result" execution_count="1">
<pre><code>+---------+
|max(dist)|
+---------+
|        5|
+---------+
</code></pre>
</div>
</div>
<div class="cell markdown">
<p>This seems pretty shallow, only 5 clicks from Lord Voldemort and you could reach any article on Wikipedia.</p>
</div>
<div class="cell code" execution_count="1" scrolled="false">
<pre><code class="language-scala">// Let's also look at some quantiles of the distance for good measure.
dfD.stat.approxQuantile(&quot;dist&quot;, Array(0.5, 0.75, 0.95), 0.001)
</code></pre>
<div class="output execute_result plain_result" execution_count="1">
<pre><code>res40: Array[Double] = Array(3.0, 4.0, 4.0)
</code></pre>
</div>
</div>
<div class="cell markdown">
<p>The idea was to do this in a more rigorous fashion, where we randomly sample say 100 articles and for each of said aritcles repeat the procedure above. However, since the cluster seemed to be under a lot of stress, and this was a fairly resource intense analysis, we deicded to not pursue this further.</p>
</div>
<div class="cell markdown">
<p><strong>GAME TIME</strong> We have created a game notebook where we have hidden the name of the true landmark, the name of the notebook is <code>13_gameNotebook</code>. Clone the notebook, run the code cells with hidden code (don't view the code cell, that is cheating ;) ). Based on the returned distance, try to figure out what the true landmark is. Good luck...</p>
</div>
<div class="cell markdown">
<p>Below is an example with the same landmark as above.</p>
</div>
<div class="cell code" execution_count="1" scrolled="false">
<pre><code class="language-scala">// This function retrieves the distance to the landmark node for a guess given by the user.
def computeDistanceToTarget(guess: String, distanceDf: org.apache.spark.sql.DataFrame) : Unit = {
  val guessRow = distanceDf.filter(col(&quot;page_title&quot;)===guess) 
  if (guessRow.isEmpty) {
    return println(&quot;Guess not in articles...Try again&quot;)
  }
  val distance = guessRow.select(&quot;distances.%s&quot;.format(45106L)).collect()(0)(0)
  println(&quot;Distance from %s to target is %s&quot;.format(guess, distance))
}
</code></pre>
<div class="output execute_result plain_result" execution_count="1">
<pre><code>computeDistanceToTarget: (guess: String, distanceDf: org.apache.spark.sql.DataFrame)Unit
</code></pre>
</div>
</div>
<div class="cell code" execution_count="1" scrolled="false">
<pre><code class="language-scala">// This should be 1...
computeDistanceToTarget(&quot;Harry_Potter&quot;, dfPaths)
</code></pre>
<div class="output execute_result plain_result" execution_count="1">
<pre><code>Distance from Harry_Potter to target is 1
</code></pre>
</div>
</div>
<div class="cell code" execution_count="1" scrolled="false">
<pre><code class="language-scala">computeDistanceToTarget(&quot;Bay_City,_Texas&quot;, dfPaths)
</code></pre>
<div class="output execute_result plain_result" execution_count="1">
<pre><code>Distance from Bay_City,_Texas to target is 3
</code></pre>
</div>
</div>
<div class="cell code" execution_count="1" scrolled="false">
<pre><code class="language-scala">computeDistanceToTarget(&quot;Jesus&quot;, dfPaths)
</code></pre>
<div class="output execute_result plain_result" execution_count="1">
<pre><code>Distance from Jesus to target is 3
</code></pre>
</div>
</div>
<div class="cell markdown">
<h2 id="bfs"><a class="header" href="#bfs">BFS</a></h2>
<p>Finally, the last GraphFrames algorithm we tried out in the analysis of the article graph was BFS(Breadth-first search). BFS finds the shortest path(s) from one vertex (or a set of vertices) to another vertex (or a set of vertices).</p>
</div>
<div class="cell code" execution_count="1" scrolled="auto">
<pre><code class="language-scala">displayHTML(frameIt(&quot;https://en.wikipedia.org/wiki/Breadth-first_search&quot;, 500))
</code></pre>
<div class="output execute_result html_result" execution_count="1">
<iframe 
 src="https://en.wikipedia.org/wiki/Breadth-first_search"
 width="95%" height="500"
 sandbox>
  <p>
    <a href="http://spark.apache.org/docs/latest/index.html">
      Fallback link for browsers that, unlikely, don't support frames
    </a>
  </p>
</iframe>
</div>
</div>
<div class="cell code" execution_count="1" scrolled="false">
<pre><code class="language-scala">// TRY OUT CHANGEING MAXPATH PARAM TO SEE IF IT SPEEDS UP
val paths = g.bfs.fromExpr(&quot;page_title = 'Lord_Voldemort'&quot;).toExpr(&quot;page_title = 'Thanksgiving_after_Communion'&quot;).run()
paths.show()
</code></pre>
<div class="output execute_result plain_result" execution_count="1">
<pre><code>+--------------------+-----------------+--------------------+--------------------+--------------------+--------------------+--------------------+
|                from|               e0|                  v1|                  e1|                  v2|                  e2|                  to|
+--------------------+-----------------+--------------------+--------------------+--------------------+--------------------+--------------------+
|{45106, Lord_Vold...| {45106, 2731583}|{2731583, Adolf_H...|    {2731583, 56371}|{56371, Mass_(lit...|   {56371, 12999830}|{12999830, Thanks...|
|{45106, Lord_Vold...|   {45106, 17867}|{17867, London, 3...|   {17867, 18974659}|{18974659, Englis...|{18974659, 12999830}|{12999830, Thanks...|
|{45106, Lord_Vold...|   {45106, 87334}|{87334, Prophecy,...|     {87334, 730118}|{730118, Prayer_t...|  {730118, 12999830}|{12999830, Thanks...|
|{45106, Lord_Vold...|     {45106, 738}|{738, Albania, 27...|      {738, 5596099}|{5596099, Catholi...| {5596099, 12999830}|{12999830, Thanks...|
|{45106, Lord_Vold...|   {45106, 17867}|{17867, London, 3...|       {17867, 5955}|{5955, Church_of_...|    {5955, 12999830}|{12999830, Thanks...|
|{45106, Lord_Vold...| {45106, 1645518}|{1645518, Massach...|     {1645518, 5955}|{5955, Church_of_...|    {5955, 12999830}|{12999830, Thanks...|
|{45106, Lord_Vold...|{45106, 11927837}|{11927837, Religi...|    {11927837, 5955}|{5955, Church_of_...|    {5955, 12999830}|{12999830, Thanks...|
|{45106, Lord_Vold...|{45106, 21244171}|{21244171, Gentry...|   {21244171, 21541}|{21541, Nicene_Cr...|   {21541, 12999830}|{12999830, Thanks...|
|{45106, Lord_Vold...|{45106, 19119938}|{19119938, Holly,...| {19119938, 5223729}|{5223729, Blood_o...| {5223729, 12999830}|{12999830, Thanks...|
|{45106, Lord_Vold...|{45106, 60495569}|{60495569, Harry_...|{60495569, 19280748}|{19280748, Episco...|{19280748, 12999830}|{12999830, Thanks...|
|{45106, Lord_Vold...| {45106, 1645518}|{1645518, Massach...| {1645518, 19280748}|{19280748, Episco...|{19280748, 12999830}|{12999830, Thanks...|
|{45106, Lord_Vold...| {45106, 3414021}|{3414021, George_...| {3414021, 19280748}|{19280748, Episco...|{19280748, 12999830}|{12999830, Thanks...|
|{45106, Lord_Vold...|   {45106, 45936}|{45936, Spirit_po...|       {45936, 9767}|{9767, Eucharist,...|    {9767, 12999830}|{12999830, Thanks...|
|{45106, Lord_Vold...|   {45106, 87334}|{87334, Prophecy,...|      {87334, 46398}|{46398, Rosary, 6...|   {46398, 12999830}|{12999830, Thanks...|
|{45106, Lord_Vold...|   {45106, 29798}|{29798, The_Lord_...|      {29798, 65427}|{65427, Plainsong...|   {65427, 12999830}|{12999830, Thanks...|
|{45106, Lord_Vold...|   {45106, 87334}|{87334, Prophecy,...|   {87334, 30869117}|{30869117, Latin_...|{30869117, 12999830}|{12999830, Thanks...|
|{45106, Lord_Vold...|     {45106, 738}|{738, Albania, 27...|     {738, 30869117}|{30869117, Latin_...|{30869117, 12999830}|{12999830, Thanks...|
|{45106, Lord_Vold...|{45106, 13425800}|{13425800, War_on...|{13425800, 30869117}|{30869117, Latin_...|{30869117, 12999830}|{12999830, Thanks...|
|{45106, Lord_Vold...|   {45106, 52847}|{52847, Children'...|      {52847, 18494}|{18494, Lord's_Pr...|   {18494, 12999830}|{12999830, Thanks...|
|{45106, Lord_Vold...|     {45106, 738}|{738, Albania, 27...|       {738, 347105}|{347105, Mother_T...|  {347105, 12999830}|{12999830, Thanks...|
+--------------------+-----------------+--------------------+--------------------+--------------------+--------------------+--------------------+
only showing top 20 rows

paths: org.apache.spark.sql.DataFrame = [from: struct&lt;id: int, page_title: string ... 1 more field&gt;, e0: struct&lt;src: int, dst: int&gt; ... 5 more fields]
</code></pre>
</div>
</div>
<div class="cell code" execution_count="1" scrolled="auto">
<pre><code class="language-scala">displayHTML(frameIt(&quot;https://en.wikipedia.org/wiki/Lord_Voldemort&quot;, 500))
</code></pre>
<div class="output execute_result html_result" execution_count="1">
<iframe 
 src="https://en.wikipedia.org/wiki/Lord_Voldemort"
 width="95%" height="500"
 sandbox>
  <p>
    <a href="http://spark.apache.org/docs/latest/index.html">
      Fallback link for browsers that, unlikely, don't support frames
    </a>
  </p>
</iframe>
</div>
</div>
<div class="cell markdown">
<p>This was quite slow as you can see from the runtime, we can speed it up by specifying the <code>maxPathLength</code> which governs how many many edges the algorithm is alowed to travel before it should have reached its destination.</p>
</div>
<div class="cell code" execution_count="1" scrolled="false">
<pre><code class="language-scala">// THIS JUST KEPT CRASHING....
// val paths = g.bfs.fromExpr(&quot;page_title = 'Lord_Voldemort'&quot;).toExpr(&quot;page_title = 'Thanksgiving_after_Communion'&quot;).maxPathLength(5).run()
// paths.show()
</code></pre>
</div>
<div class="cell markdown">
<p>Hopefully this was faster.</p>
</div>
<div class="cell markdown">
<h2 id="finding-bidirected-edges"><a class="header" href="#finding-bidirected-edges">Finding bidirected edges</a></h2>
<p>How common are bi-directed edges? We check this using motifs.</p>
</div>
<div class="cell code" execution_count="1" scrolled="false">
<pre><code class="language-scala">val motifGraph = g.find(&quot;(a) - [e1] -&gt; (b) ; (b) - [e2] -&gt; (a)&quot;) // Find pairs of nodes pointing to each other
val totalCount = motifGraph.count()/2L // Divide by 2 since every row will be a duplicate
</code></pre>
<div class="output execute_result plain_result" execution_count="1">
<pre><code>motifGraph: org.apache.spark.sql.DataFrame = [a: struct&lt;id: int, page_title: string ... 1 more field&gt;, e1: struct&lt;src: int, dst: int&gt; ... 2 more fields]
totalCount: Long = 50566122
</code></pre>
</div>
</div>
<div class="cell markdown">
<p>Interesting, about 25% of edges...</p>
</div>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../../contents/student-project-01_group-GraphOfWiki/student-project-01_group-GraphOfWiki/08_explorationArticleGraph.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../../../contents/student-project-01_group-GraphOfWiki/student-project-01_group-GraphOfWiki/10_explorativeMotifs.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../../contents/student-project-01_group-GraphOfWiki/student-project-01_group-GraphOfWiki/08_explorationArticleGraph.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../../../contents/student-project-01_group-GraphOfWiki/student-project-01_group-GraphOfWiki/10_explorativeMotifs.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script type="text/javascript">
            window.playground_copyable = true;
        </script>


        <script src="../../../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../../searcher.js" type="text/javascript" charset="utf-8"></script>

        <script src="../../../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->


    </body>
</html>
